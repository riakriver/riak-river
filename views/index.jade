extends layout

block content
  :markdown
    Riak-River is a Riak cloud hosting service for the rest of us.
    This service provides an affordable, fast, and scalable way to get
    started with Riak. The indeal use case would be a development environment
    then a small to medium production app. The pricing is based on an usage model.
    This service also offers other benefits including a authentication scheme on top
    of Riak using ip-address white-listing and/or token based authentication.

    We are currently in the Alpha stages of development and would love any potential
    users help shape the product. Sign up below to get more information and be the first
    to try out the beta.
  table
    tr
      td Name
      td
        input(type="text", id="name", name="name")
    tr
      td Email
      td
        input(type="text", name="email", id="email")
    tr
      td(colspan=2)
        button.btn.btn-primary(id="submit-user-data", type="submit", value="submit") Submit

  script(type='text/javascript')
    var host = "#{socketio}";
    $('#submit-user-data').click(function(){
      var params = {
        name: $('#name').val(),
        email: $('#email').val()
      };
      var socket = io.connect(host);
      socket.emit('new subscriber', {user:params});
      var button = $('#submit-user-data');
      socket.on('success', function(){
        button.attr('class', 'btn btn-success');
        button.html("You're subscribed!");
        setTimeout(reset, 3000);
      });
      socket.on('error', function(){
        button.attr('class', 'btn btn-danger');
        button.html("Error has occured");
        setTimout(reset, 3000);
      });
      var reset = function(){
        button.attr('class', 'btn btn-primary');
        button.html('Submit');
      };
    });
